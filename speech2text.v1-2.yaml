openapi: 3.0.0
info:
  title: "RossaVoice's Speech2Text API"
  version: '1.0'
  contact:
    name: Rossa Team
    email: hy@cinnamon.is
  description: "This document describes API for speech-to-text engine of RossaVoice.\n\n\n\nA flow of speech-to-text is described as follow.\n\n\n- First, uploading the audio file to our server via `POST /api/files`\n- Second, adding a speech-to-text job by `POST /api/jobs`\n- Third, checking the process by `GET /api/jobs/{job_id}/status`\n- Fourth, once you receive progess \"transcribed\" from `GET \n/api/jobs/{job_id}/status`, you can get the result by `GET /api/jobs/{job_id}`\n- Finally, discard the job by `DELETE /api/jobs/{job_id}`\n\nNOTE: Account management would be provided on an `account-service`."
servers:
  - url: 'http://localhost:5000'
    description: rossa-service
  - url: 'http://localhost:5001'
    description: account-service
paths:
  '/api/jobs/{job_id}':
    parameters:
      - schema:
          type: string
        name: job_id
        in: path
        required: true
    delete:
      summary: 5. Removing Job
      responses:
        '204':
          description: |-
            No Content
            Successfully delete job.
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  _state:
                    type: string
                    default: ERR
                  _error:
                    type: object
                    required:
                      - code
                      - message
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                required:
                  - _state
                  - _error
              examples:
                example-400:
                  value:
                    _state: ERR
                    _error:
                      code: 404
                      message: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
      description: |-
        This API aims to remove:
        - finished job
        - running job
      operationId: delete-job-job_id
    get:
      summary: 4. Getting job
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - transcribing
                      - success
                  result:
                    type: array
                    description: Only available when status is `transcribed`
                    items:
                      type: object
                      properties:
                        start:
                          type: number
                          description: The start time of this transcript.
                        end:
                          type: number
                          description: The end time of this transcript.
                        speaker_number:
                          type: number
                          description: 'Speaker number talking from "start" to "end".'
                        transcript:
                          type: string
                          description: 'Transcript of "speaker_number" talking from "start" to "end".'
                      required:
                        - start
                        - end
                        - speaker_number
                        - transcript
                  number_conversion:
                    type: boolean
                  filler_tagging:
                    type: boolean
                  punctuation:
                    type: boolean
                  speaker_diarization:
                    type: boolean
                  _id:
                    type: string
                  _updated:
                    type: string
                  _created:
                    type: string
                  file_id:
                    type: string
                required:
                  - status
                  - result
                  - number_conversion
                  - filler_tagging
                  - punctuation
                  - speaker_diarization
                  - _id
                  - _updated
                  - _created
                  - file_id
              examples:
                example-200:
                  value:
                    _id: 5e735d3671870305ecf65ffd
                    file_id: 5e735d2e71870305ecf65ffc
                    speaker_diarization: false
                    number_conversion: true
                    punctuation: true
                    filler_tagging: false
                    _updated: 'Thu, 19 Mar 2020 11:53:26 GMT'
                    _created: 'Thu, 19 Mar 2020 11:53:26 GMT'
                    status: success
                    result:
                      - audio_path: assets/chiba0132-C.wav
                        start: 0.575
                        end: 4
                        transcript: でこないだ話なんですけど私の話ではなくもちろん
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  _state:
                    type: string
                    default: ERR
                  _error:
                    type: object
                    required:
                      - code
                      - message
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                required:
                  - _state
                  - _error
              examples:
                example-400:
                  value:
                    _state: ERR
                    _error:
                      code: 404
                      message: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
      requestBody: {}
      operationId: get-job-job_id
      description: Get the result of a transcribed speech2text job.
    operationId: get-removejob
  '/api/jobs/{job_id}/status':
    get:
      summary: 3. Getting job status
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  _updated:
                    type: string
                    format: date-time
                  _created:
                    type: string
                    format: date-time
                  status:
                    type: string
                required:
                  - _id
                  - _updated
                  - _created
                  - status
              examples:
                example-200:
                  value:
                    _id: 5e735d3671870305ecf65ffd
                    _updated: 'Thu, 19 Mar 2020 11:53:26 GMT'
                    _created: 'Thu, 19 Mar 2020 11:53:26 GMT'
                    status: success
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  _error:
                    type: object
                    required:
                      - code
                      - message
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                  _state:
                    type: string
                    default: ERR
                required:
                  - _state
                  - _error
              examples:
                example-400:
                  value:
                    _error:
                      code: 404
                      message: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
                    _state: ERR
      operationId: get-job-job_id-status
      description: This API aims to check the job status of added job (`POST /api/jobs`).
      requestBody: {}
    parameters:
      - schema:
          type: string
        name: job_id
        in: path
        required: true
  /api/jobs:
    parameters: []
    post:
      summary: 2. Adding Speech2Text Job
      operationId: post-job
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  _updated:
                    type: string
                    format: date-time
                  _created:
                    type: string
                    format: date-time
                  _id:
                    type: string
                  _state:
                    type: string
                    default: OK
                  file_id:
                    type: string
                  speaker_diarization:
                    type: boolean
                  punctuation:
                    type: boolean
                  filler_tagging:
                    type: boolean
                  number_conversion:
                    type: boolean
                  status:
                    type: string
                    default: transcribing
                    enum:
                      - transcribing
                      - success
                  file_name:
                    type: string
                required:
                  - _updated
                  - _created
                  - _id
                  - _state
                  - file_id
                  - speaker_diarization
                  - punctuation
                  - filler_tagging
                  - number_conversion
                  - status
              examples:
                example:
                  value:
                    _updated: 'Thu, 19 Mar 2020 11:53:26 GMT'
                    _created: 'Thu, 19 Mar 2020 11:53:26 GMT'
                    _id: 5e735d3671870305ecf65ffd
                    _state: OK
                    file_id: 5e735d2e71870305ecf65ffc
                    speaker_diarization: false
                    number_conversion: true
                    punctuation: true
                    filler_tagging: false
                    status: transcribing
                    file_name: 5e735d2e71870305ecf65ffa_chiba0132-C.wav
        '422':
          description: |
            Unprocessable Entity (WebDAV)

            In such case:
              - `file_id` is invalid because uploaded file with `file_id` is unavailable on server.
              - any field is in wrong type.
              - lack of required field(s).
          content:
            application/json:
              schema:
                type: object
                properties:
                  _error:
                    type: object
                    required:
                      - code
                      - message
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                  _issues:
                    type: object
                    properties:
                      _exception:
                        type: string
                  _state:
                    type: string
                    default: ERR
                required:
                  - _state
                  - _error
              examples:
                example:
                  value:
                    _state: ERR
                    _issues:
                      speaker_diarization: required field
                    _error:
                      code: 422
                      message: 'Insertion failure: 1 document(s) contain(s) error(s)'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                file_id:
                  type: string
                  description: '`_id` of uploaded file which was returned when using `POST /api/file`. '
                speaker_diarization:
                  type: boolean
                  description: 'Speaker diarization mode which indicates "who spoke what"'
                punctuation:
                  type: boolean
                  description: Punctuation adding
                filler_tagging:
                  type: boolean
                  description: Displaying filler mark
                number_conversion:
                  type: boolean
                  description: Converting kanji number into romanji number
              required:
                - file_id
                - speaker_diarization
                - punctuation
                - filler_tagging
                - number_conversion
        description: ''
      description: This API aims to add a speech to text job with the uploaded file (done in `POST /api/files`).
    get:
      summary: List created jobs
      operationId: get-api-jobs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  '"_items':
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        file_id:
                          type: string
                        speaker_diarization:
                          type: boolean
                        punctuation:
                          type: boolean
                        filler_tagging:
                          type: boolean
                        number_conversion:
                          type: boolean
                        _updated:
                          type: string
                          format: date-time
                        _created:
                          type: string
                          format: date-time
                        status:
                          type: string
                        result:
                          type: array
                          items:
                            type: object
                            properties:
                              audio_path:
                                type: string
                              start:
                                type: number
                              end:
                                type: number
                              transcript:
                                type: string
                            required:
                              - audio_path
                              - start
                              - end
                              - transcript
                        owner:
                          type: string
                        file_name:
                          type: string
                      required:
                        - _id
                        - file_id
                        - speaker_diarization
                        - punctuation
                        - filler_tagging
                        - number_conversion
                        - _updated
                        - _created
                        - status
                        - result
                  _meta:
                    type: object
                    required:
                      - page
                      - max_results
                      - total
                    properties:
                      page:
                        type: number
                      max_results:
                        type: number
                      total:
                        type: number
                required:
                  - '"_items'
                  - _meta
              examples:
                example-1:
                  value:
                    _items:
                      - _id: 5eafc5b33236b33aba37310c
                        file_id: 5eafc5953236b33aba37310b
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Mon, 04 May 2020 07:35:15 GMT'
                        _created: 'Mon, 04 May 2020 07:35:15 GMT'
                        status: success
                        result:
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 0.72
                            end: 3.92
                            speaker_id: '1'
                            transcript: で恋の話なんですけど、私の話ではなく、もちろん。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 3.92
                            end: 10.16
                            speaker_id: '1'
                            transcript: あの、ね、受講のことなんだけど、中２の子たち持ってて中に行って、こう、微妙な都市じゃない。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 10.16
                            end: 11.63
                            speaker_id: '1'
                            transcript: で。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 11.63
                            end: 16.72
                            speaker_id: '1'
                            transcript: なんか、国語担当してて、で、文学を教える時に、
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 16.72
                            end: 22.67
                            speaker_id: '1'
                            transcript: こう、例えば命をが出て来たらさ、もう命をの恋愛遍歴について多少かを研究しなきゃいけないとか。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 22.67
                            end: 28.8
                            speaker_id: '1'
                            transcript: あとはなんだろう、恋愛の要素って文学干渉するとき、特にこの後和歌が出てくるとか。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 28.8
                            end: 33.28
                            speaker_id: '1'
                            transcript: そういう時に、ほら、こういう時ってこうじゃないって話をしなきゃいけないじゃない。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 33.28
                            end: 37.38
                            speaker_id: '1'
                            transcript: でも、それは感傷の一部だからしようと思っているんだけど。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 37.38
                            end: 40.3
                            speaker_id: '1'
                            transcript: なんか、（Ｆねー）、多分ね、生徒の半分のが微妙なのよ。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 40.3
                            end: 47.25
                            speaker_id: '1'
                            transcript: 本人たちは興味があるから、こう順々にこそこそと書いてあるメモと、こう、ぴっとこうやってみると。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 47.25
                            end: 51.46
                            speaker_id: '1'
                            transcript: なんだかデートしたいなみたいなこと書いてあって、めちゃくちゃ興味あるの。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 51.46
                            end: 52.9
                            speaker_id: '1'
                            transcript: ただたぶん。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 52.9
                            end: 56.26
                            speaker_id: '1'
                            transcript: 私から言われるとちょっと引くんだよね。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 56.26
                            end: 61.74
                            speaker_id: '1'
                            transcript: それをどうしたらいいのかなぁ。こないだもちょっとじゃあの、臓器移植の。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 61.74
                            end: 63.37
                            speaker_id: '1'
                            transcript: 話題を振って。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 63.37
                            end: 68.09
                            speaker_id: '1'
                            transcript: で、私がちょっと参考にこの人砕けた意見だから、（Ｆまあ）こういう意見も。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 68.09
                            end: 74.07
                            speaker_id: '1'
                            transcript: マットの意見なんだよ、論点作る時はこれもとこういうのもありなんだよって思って出した、話題が。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 74.07
                            end: 76.89
                            speaker_id: '1'
                            transcript: （Ｆあー）、のー（Ｆまー）接しちゃうな話題だったらね。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 76.89
                            end: 78.5
                            speaker_id: '1'
                            transcript: で。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 78.5
                            end: 80.23
                            speaker_id: '1'
                            transcript: やっぱり反応悪いんだ。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 80.23
                            end: 82.47
                            speaker_id: '1'
                            transcript: とう。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 82.47
                            end: 84.86
                            speaker_id: '1'
                            transcript: 興味はあるんだけど。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 84.86
                            end: 86.06
                            speaker_id: '1'
                            transcript: それを。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 86.06
                            end: 93.82
                            speaker_id: '1'
                            transcript: なんだから、たぶん直ぐ家らしくなっちゃって、そんなこと、自分はいうのは問題があると思っちゃ（Ｆうん）、じゃないのかな。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 93.82
                            end: 98.73
                            speaker_id: '1'
                            transcript: それはあると思う多分、こう個別だったら、それ程問題。
                          - audio_path: 5eafc5953236b33aba37310a_chiba0132-C.wav
                            start: 101.99
                            end: 102.39
                            speaker_id: '1'
                            transcript: ''
                        owner: admin
                        file_name: chiba0132-C.wav
                      - _id: 5eafc66b3236b33aba37310f
                        file_id: 5eafc65e3236b33aba37310e
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Mon, 04 May 2020 07:38:19 GMT'
                        _created: 'Mon, 04 May 2020 07:38:19 GMT'
                        status: success
                        result:
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 0.72
                            end: 3.92
                            speaker_id: '1'
                            transcript: で恋の話なんですけど、私の話ではなく、もちろん。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 3.92
                            end: 10.16
                            speaker_id: '1'
                            transcript: あの、ね、受講のことなんだけど、中２の子たち持ってて中に行って、こう、微妙な都市じゃない。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 10.16
                            end: 11.63
                            speaker_id: '1'
                            transcript: で。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 11.63
                            end: 16.72
                            speaker_id: '1'
                            transcript: なんか、国語担当してて、で、文学を教える時に、
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 16.72
                            end: 22.67
                            speaker_id: '1'
                            transcript: こう、例えば命をが出て来たらさ、もう命をの恋愛遍歴について多少かを研究しなきゃいけないとか。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 22.67
                            end: 28.8
                            speaker_id: '1'
                            transcript: あとはなんだろう、恋愛の要素って文学干渉するとき、特にこの後和歌が出てくるとか。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 28.8
                            end: 33.28
                            speaker_id: '1'
                            transcript: そういう時に、ほら、こういう時ってこうじゃないって話をしなきゃいけないじゃない。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 33.28
                            end: 37.38
                            speaker_id: '1'
                            transcript: でも、それは感傷の一部だからしようと思っているんだけど。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 37.38
                            end: 40.3
                            speaker_id: '1'
                            transcript: なんか、（Ｆねー）、多分ね、生徒の半分のが微妙なのよ。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 40.3
                            end: 47.25
                            speaker_id: '1'
                            transcript: 本人たちは興味があるから、こう順々にこそこそと書いてあるメモと、こう、ぴっとこうやってみると。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 47.25
                            end: 51.46
                            speaker_id: '1'
                            transcript: なんだかデートしたいなみたいなこと書いてあって、めちゃくちゃ興味あるの。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 51.46
                            end: 52.9
                            speaker_id: '1'
                            transcript: ただたぶん。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 52.9
                            end: 56.26
                            speaker_id: '1'
                            transcript: 私から言われるとちょっと引くんだよね。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 56.26
                            end: 61.74
                            speaker_id: '1'
                            transcript: それをどうしたらいいのかなぁ。こないだもちょっとじゃあの、臓器移植の。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 61.74
                            end: 63.37
                            speaker_id: '1'
                            transcript: 話題を振って。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 63.37
                            end: 68.09
                            speaker_id: '1'
                            transcript: で、私がちょっと参考にこの人砕けた意見だから、（Ｆまあ）こういう意見も。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 68.09
                            end: 74.07
                            speaker_id: '1'
                            transcript: マットの意見なんだよ、論点作る時はこれもとこういうのもありなんだよって思って出した、話題が。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 74.07
                            end: 76.89
                            speaker_id: '1'
                            transcript: （Ｆあー）、のー（Ｆまー）接しちゃうな話題だったらね。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 76.89
                            end: 78.5
                            speaker_id: '1'
                            transcript: で。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 78.5
                            end: 80.23
                            speaker_id: '1'
                            transcript: やっぱり反応悪いんだ。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 80.23
                            end: 82.47
                            speaker_id: '1'
                            transcript: とう。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 82.47
                            end: 84.86
                            speaker_id: '1'
                            transcript: 興味はあるんだけど。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 84.86
                            end: 86.06
                            speaker_id: '1'
                            transcript: それを。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 86.06
                            end: 93.82
                            speaker_id: '1'
                            transcript: なんだから、たぶん直ぐ家らしくなっちゃって、そんなこと、自分はいうのは問題があると思っちゃ（Ｆうん）、じゃないのかな。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 93.82
                            end: 98.73
                            speaker_id: '1'
                            transcript: それはあると思う多分、こう個別だったら、それ程問題。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 101.99
                            end: 102.39
                            speaker_id: '1'
                            transcript: ''
                        owner: admin
                        file_name: chiba0132-C.wav
                      - _id: 5eafca163236b33aba373112
                        file_id: 5eafc9e53236b33aba373111
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Mon, 04 May 2020 07:53:58 GMT'
                        _created: 'Mon, 04 May 2020 07:53:58 GMT'
                        status: success
                        result: []
                        owner: user
                        file_name: chiba0132-C.wav
                      - _id: 5eb27fef4225912474c56e41
                        file_id: 5eafc65e3236b33aba37310e
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Wed, 06 May 2020 09:14:23 GMT'
                        _created: 'Wed, 06 May 2020 09:14:23 GMT'
                        status: success
                        result:
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 0.72
                            end: 3.92
                            speaker_id: '1'
                            transcript: で恋の話なんですけど、私の話ではなく、もちろん。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 3.92
                            end: 10.16
                            speaker_id: '1'
                            transcript: あの、ね、受講のことなんだけど、中２の子たち持ってて中に行って、こう、微妙な都市じゃない。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 10.16
                            end: 11.63
                            speaker_id: '1'
                            transcript: で。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 11.63
                            end: 16.72
                            speaker_id: '1'
                            transcript: なんか、国語担当してて、で、文学を教える時に、
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 16.72
                            end: 22.67
                            speaker_id: '1'
                            transcript: こう、例えば命をが出て来たらさ、もう命をの恋愛遍歴について多少かを研究しなきゃいけないとか。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 22.67
                            end: 28.8
                            speaker_id: '1'
                            transcript: あとはなんだろう、恋愛の要素って文学干渉するとき、特にこの後和歌が出てくるとか。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 28.8
                            end: 33.28
                            speaker_id: '1'
                            transcript: そういう時に、ほら、こういう時ってこうじゃないって話をしなきゃいけないじゃない。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 33.28
                            end: 37.38
                            speaker_id: '1'
                            transcript: でも、それは感傷の一部だからしようと思っているんだけど。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 37.38
                            end: 40.3
                            speaker_id: '1'
                            transcript: なんか、（Ｆねー）、多分ね、生徒の半分のが微妙なのよ。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 40.3
                            end: 47.25
                            speaker_id: '1'
                            transcript: 本人たちは興味があるから、こう順々にこそこそと書いてあるメモと、こう、ぴっとこうやってみると。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 47.25
                            end: 51.46
                            speaker_id: '1'
                            transcript: なんだかデートしたいなみたいなこと書いてあって、めちゃくちゃ興味あるの。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 51.46
                            end: 52.9
                            speaker_id: '1'
                            transcript: ただたぶん。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 52.9
                            end: 56.26
                            speaker_id: '1'
                            transcript: 私から言われるとちょっと引くんだよね。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 56.26
                            end: 61.74
                            speaker_id: '1'
                            transcript: それをどうしたらいいのかなぁ。こないだもちょっとじゃあの、臓器移植の。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 61.74
                            end: 63.37
                            speaker_id: '1'
                            transcript: 話題を振って。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 63.37
                            end: 68.09
                            speaker_id: '1'
                            transcript: で、私がちょっと参考にこの人砕けた意見だから、（Ｆまあ）こういう意見も。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 68.09
                            end: 74.07
                            speaker_id: '1'
                            transcript: マットの意見なんだよ、論点作る時はこれもとこういうのもありなんだよって思って出した、話題が。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 74.07
                            end: 76.89
                            speaker_id: '1'
                            transcript: （Ｆあー）、のー（Ｆまー）接しちゃうな話題だったらね。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 76.89
                            end: 78.5
                            speaker_id: '1'
                            transcript: で。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 78.5
                            end: 80.23
                            speaker_id: '1'
                            transcript: やっぱり反応悪いんだ。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 80.23
                            end: 82.47
                            speaker_id: '1'
                            transcript: とう。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 82.47
                            end: 84.86
                            speaker_id: '1'
                            transcript: 興味はあるんだけど。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 84.86
                            end: 86.06
                            speaker_id: '1'
                            transcript: それを。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 86.06
                            end: 93.82
                            speaker_id: '1'
                            transcript: なんだから、たぶん直ぐ家らしくなっちゃって、そんなこと、自分はいうのは問題があると思っちゃ（Ｆうん）、じゃないのかな。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 93.82
                            end: 98.73
                            speaker_id: '1'
                            transcript: それはあると思う多分、こう個別だったら、それ程問題。
                          - audio_path: 5eafc65d3236b33aba37310d_chiba0132-C.wav
                            start: 101.99
                            end: 102.39
                            speaker_id: '1'
                            transcript: ''
                        owner: admin
                        file_name: chiba0132-C.wav
                      - _id: 5eb3b30a1cb7f67181355581
                        file_id: 5eafc9e53236b33aba373111
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Thu, 07 May 2020 07:04:42 GMT'
                        _created: 'Thu, 07 May 2020 07:04:42 GMT'
                        status: transcribing
                        owner: user
                        file_name: chiba0132-C.wav
                      - _id: 5eb91bdbe3b0d9a7a43cf9e5
                        file_id: 5eb91bd4e3b0d9a7a43cf9e4
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Mon, 11 May 2020 09:33:15 GMT'
                        _created: 'Mon, 11 May 2020 09:33:15 GMT'
                        status: success
                        result:
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 0
                            end: 2.4
                            speaker_id: '1'
                            transcript: 室長。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 2.4
                            end: 5.01
                            speaker_id: '1'
                            transcript: ちょっとそれで調査をお願いしたいですけれども。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 5.01
                            end: 12.61
                            speaker_id: '2'
                            transcript: かしこまりました。私に、あの、そしたら調査にあたりまして解散へお伺いさせていただいてもおいしいでしょうか。はい、
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 12.61
                            end: 14.16
                            speaker_id: '1'
                            transcript: いいの。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 14.16
                            end: 15.76
                            speaker_id: '1'
                            transcript: はい、（Ｆえーっとー）
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 15.76
                            end: 16.77
                            speaker_id: '1'
                            transcript: ジミーさん。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 16.77
                            end: 17.57
                            speaker_id: '2'
                            transcript: はい、
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 17.57
                            end: 19.27
                            speaker_id: '1'
                            transcript: 四五、六。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 19.27
                            end: 20.07
                            speaker_id: '2'
                            transcript: はい、
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 20.07
                            end: 21.15
                            speaker_id: '1'
                            transcript: そう、（Ｆえー）、（Ｆとー）。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 21.15
                            end: 21.95
                            speaker_id: '2'
                            transcript: なぁ。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 21.95
                            end: 23.95
                            speaker_id: '1'
                            transcript: しーしー。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 29.55
                            end: 29.95
                            speaker_id: '2'
                            transcript: でも。
                        owner: admin
                        file_name: Test_30s.wav
                      - _id: 5eb9334678d11a27c86252c5
                        file_id: 5eb91bd4e3b0d9a7a43cf9e4
                        speaker_diarization: true
                        punctuation: true
                        filler_tagging: true
                        number_conversion: true
                        _updated: 'Mon, 11 May 2020 11:13:10 GMT'
                        _created: 'Mon, 11 May 2020 11:13:10 GMT'
                        status: success
                        result:
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 0
                            end: 2.4
                            speaker_id: '1'
                            transcript: 室長。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 2.4
                            end: 5.01
                            speaker_id: '1'
                            transcript: ちょっとそれで調査をお願いしたいですけれども。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 5.01
                            end: 12.61
                            speaker_id: '2'
                            transcript: かしこまりました。私に、あの、そしたら調査にあたりまして解散へお伺いさせていただいてもおいしいでしょうか。はい、
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 12.61
                            end: 14.16
                            speaker_id: '1'
                            transcript: いいの。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 14.16
                            end: 15.76
                            speaker_id: '1'
                            transcript: はい、（Ｆえーっとー）
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 15.76
                            end: 16.77
                            speaker_id: '1'
                            transcript: ジミーさん。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 16.77
                            end: 17.57
                            speaker_id: '2'
                            transcript: はい、
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 17.57
                            end: 19.27
                            speaker_id: '1'
                            transcript: 四五、六。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 19.27
                            end: 20.07
                            speaker_id: '2'
                            transcript: はい、
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 20.07
                            end: 21.15
                            speaker_id: '1'
                            transcript: そう、（Ｆえー）、（Ｆとー）。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 21.15
                            end: 21.95
                            speaker_id: '2'
                            transcript: なぁ。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 21.95
                            end: 23.95
                            speaker_id: '1'
                            transcript: しーしー。
                          - audio_path: 5eb91bd4e3b0d9a7a43cf9e3_Test_30s.wav
                            start: 29.55
                            end: 29.95
                            speaker_id: '2'
                            transcript: でも。
                        owner: admin
                        file_name: Test_30s.wav
                    _meta:
                      page: 1
                      max_results: 10
                      total: 7
      parameters:
        - schema:
            type: string
          in: query
          name: sort
          description: "fields that results can be sorted according to: [file_name, created_by, _created, status]\nusing '-' before the field to indicate DESC order "
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
        - schema:
            type: number
          in: query
          name: max_results
          description: number of jobs on one page
        - schema:
            type: number
          in: query
          name: page
          description: 'page index, start from 1'
      description: |-
        For `admin`/`superuser`: can get all jobs, but the result of jobs owned by other users will be hidden.


        For `user`: can get their jobs only.
  /api/files:
    post:
      summary: 1. Uploading audio file
      operationId: post-file
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  _updated:
                    type: string
                    format: date-time
                  _created:
                    type: string
                    format: date-time
                  _id:
                    type: string
                    description: id of uploaded file on server
                  _state:
                    type: string
                    default: OK
                required:
                  - _updated
                  - _created
                  - _id
                  - _state
              examples:
                example-201:
                  value:
                    _updated: 'Thu, 19 Mar 2020 11:53:18 GMT'
                    _created: 'Thu, 19 Mar 2020 11:53:18 GMT'
                    _id: 5e735d2e71870305ecf65ffc
                    _state: OK
        '422':
          description: |-
            Unprocessable Entity
            Uploaded file is not in expected format/MIME type  .
          content:
            application/json:
              schema:
                type: object
                properties:
                  _state:
                    type: string
                    default: ERR
                  _issues:
                    type: object
                    properties:
                      _exception:
                        type: string
                  _error:
                    type: object
                    required:
                      - code
                      - message
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                required:
                  - _state
                  - _error
              examples:
                example-422:
                  value:
                    _state: ERR
                    _issues:
                      exception: Unsupported MIME type text/plain
                    _error:
                      code: 422
                      message: 'Insertion failure: 1 document(s) contain(s) error(s)'
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: object
              required:
                - file
            examples: {}
        description: "This is form-data body. \nIt only has one key namely \"file\" and the value is the audio file attachment."
      description: |-
        This API aims to upload the file into the server.
        It supports for `POST /api/jobs` API that we can call with the file id.
      parameters: []
    parameters: []
  /api/accounts:
    get:
      summary: List accounts
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _items:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        username:
                          type: string
                        role:
                          type: string
                        expired_at:
                          type: string
                          description: admin and superuser accounts will not be expired
                        _created:
                          type: string
                        _updated:
                          type: string
                      required:
                        - _id
                        - username
                        - role
                  _meta:
                    type: object
                    properties:
                      page:
                        type: number
                      max_results:
                        type: number
                      total:
                        type: number
              examples:
                example-1:
                  value:
                    _items:
                      - _id: 5ea6a80afdcd174b1aec897f
                        username: ranma
                        role: admin
                        expired_at: 'Tue, 01 Jan 2030 00:00:00 GMT'
                        _created: 'Thu, 01 Jan 1970 00:00:00 GMT'
                        _updated: 'Thu, 01 Jan 1970 00:00:00 GMT'
                    _meta:
                      page: 1
                      max_results: 1
                      total: 2
      operationId: get-api-accounts
      description: 'Return all existing accounts can access rossa-service. '
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
          description: Basic-Auth
        - schema:
            type: number
          in: query
          name: page
          description: 'pagination: page index (from 1)'
        - schema:
            type: number
          in: query
          name: max_results
          description: 'pagination: number of items'
      requestBody: {}
    post:
      summary: Create account
      operationId: post-api-accounts
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  _created:
                    type: string
                  _updated:
                    type: string
                  _id:
                    type: string
                  _state:
                    type: string
                    default: OK
                required:
                  - _created
                  - _updated
                  - _id
                  - _state
        '422':
          description: |
            Unprocessable Entity.

            Message error can be found in `_issues` or `_error` (use `_error` when `_issues` is `null`)
          content:
            application/json:
              schema:
                type: object
                properties:
                  _state:
                    type: string
                  _issues:
                    type: object
                    properties:
                      '':
                        type: string
                  _error:
                    type: object
                    properties:
                      message:
                        type: string
                      code:
                        type: number
              examples:
                example-1:
                  value:
                    _state: ERR
                    _issues:
                      username: "value 'user12' is not unique"
                example-2:
                  value:
                    _state: ERR
                    _error:
                      code: 422
                      message: Cannot set expiration time for admin/superuser accounts.
      description: "Admin and superuser create new accounts.\n\nPermissions:\n\n  `admin` => `admin` | `superuser` | `user`\n  \n  `superuser` => `superuser` | `user`"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  pattern: '[a-zA-Z0-9]'
                password:
                  type: string
                  description: ''
                  format: password
                  minLength: 6
                days_to_expiration:
                  type: number
                  minimum: 0
                  description: only available for user account
                role:
                  type: string
                  enum:
                    - admin
                    - superuser
                    - user
              required:
                - username
                - password
                - role
  '/api/accounts/{account_id}':
    parameters:
      - schema:
          type: string
        name: account_id
        in: path
        required: true
    get:
      summary: "Get account's info"
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  username:
                    type: string
                  role:
                    type: string
                  expired_at:
                    type: string
                    description: admin and superuser accounts will not be expired
                  _created:
                    type: string
                    format: date-time
                  _updated:
                    type: string
                    format: date-time
                required:
                  - _id
                  - username
                  - role
                  - _created
                  - _updated
              examples:
                example-1:
                  value:
                    _id: 5ea6a80afdcd174b1aec897f
                    username: ranma
                    role: admin
                    expired_at: 'Tue, 01 Jan 2030 00:00:00 GMT'
                    _created: 'Thu, 01 Jan 1970 00:00:00 GMT'
                    _updated: 'Thu, 01 Jan 1970 00:00:00 GMT'
      operationId: get-api-accounts-account_id
      description: |-
        Return account by `_id`.

        NOTE: can access account by using `username` instead of `_id`.
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          description: Basic-Auth
          required: true
      requestBody: {}
    patch:
      summary: Update account
      operationId: patch-api-accounts-account_id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  _created:
                    type: string
                    format: date-time
                  _updated:
                    type: string
                    format: date-time
                  _state:
                    type: string
                    default: OK
              examples:
                example-1:
                  value:
                    _id: 5ea6bcc186d481e99a5779e2
                    _updated: 'Mon, 27 Apr 2020 16:36:36 GMT'
                    _created: 'Mon, 27 Apr 2020 11:06:41 GMT'
                    _state: OK
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    _state: ERR
                    _error:
                      code: 422
                      message: Cannot set expiration time for admin/superuser accounts.
                example-2:
                  value:
                    _issues:
                      password: min length is 6
                    _state: ERR
      description: "Admin and superuser update accounts: password, username, expiration.\n\nPermissions:\n\n  `admin` => `admin` | `superuser` | `user`\n  \n  `superuser` => `superuser` (owner only) | `user`"
    delete:
      summary: Delete account
      operationId: delete-api-accounts-account_id
      responses:
        '204':
          description: No Content
      description: "Admin and superuser delete accounts.\n\nPermissions:\n\n  `admin` => `admin` | `superuser` | `user`\n  \n  `superuser` => `superuser` (owner only) | `user`"
components:
  schemas: {}
